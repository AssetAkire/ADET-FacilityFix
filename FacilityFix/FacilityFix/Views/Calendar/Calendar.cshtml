@{
    ViewBag.Title = "Calendar";
    ViewBag.ActiveMenu = "Calendar";
}
@section Styles {
    <link href="~/Content/Calendar.css" rel="stylesheet" />
}

<div class="container my-5">
    <h2 class="fw-semibold mb-4">Calendar</h2>
    <div class="bg-white p-4 shadow-sm border border-2 rounded border-secondary p-3">

        <div class="d-flex justify-content-between align-items-center mb-3" style="width:100%;">
            <button id="prevMonth" class="btn btn-outline-secondary">&lt;</button>
            <h4 id="calendarMonth" class="mb-0"></h4>
            <button id="nextMonth" class="btn btn-outline-secondary">&gt;</button>
        </div>

        <div style="width:100%; height:100%;">
            <table class="table table-bordered text-center m-0" id="calendarTable" style="width:100%; height:100%;">
                <thead>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
                </thead>
                <tbody>
                <!-- Calendar days will be injected here -->
                </tbody>
            </table>
        </div>
        <script>
            const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
            ];
            let today = new Date();
            let currentMonth = today.getMonth();
            let currentYear = today.getFullYear();

            function renderCalendar(month, year) {
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            let tbl = document.querySelector("#calendarTable tbody");
            tbl.innerHTML = "";
            document.getElementById("calendarMonth").textContent = `${monthNames[month]} ${year}`;

            let date = 1;
            for (let i = 0; i < 6; i++) {
                let row = document.createElement("tr");
                for (let j = 0; j < 7; j++) {
                if (i === 0 && j < firstDay) {
                    let cell = document.createElement("td");
                    cell.innerHTML = "";
                    row.appendChild(cell);
                } else if (date > daysInMonth) {
                    let cell = document.createElement("td");
                    cell.innerHTML = "";
                    row.appendChild(cell);
                } else {
                    let cell = document.createElement("td");
                    cell.innerHTML = date;
                    if (
                    date === today.getDate() &&
                    year === today.getFullYear() &&
                    month === today.getMonth()
                    ) {
                    cell.classList.add("bg-primary", "text-white");
                    }
                    row.appendChild(cell);
                    date++;
                }
                }
                tbl.appendChild(row);
                if (date > daysInMonth) break;
            }
            }

            document.getElementById("prevMonth").addEventListener("click", function () {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar(currentMonth, currentYear);
            });

            document.getElementById("nextMonth").addEventListener("click", function () {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentMonth, currentYear);
            });

            renderCalendar(currentMonth, currentYear);
        </script>
        
    </div>
</div>
